{"ast":null,"code":"import{useState,useEffect,useRef}from\"react\";import{useTranslation}from\"react-i18next\";import{Volume2,VolumeX,Loader2}from\"lucide-react\";import{Button}from\"@/components/ui/button\";import{toast}from\"sonner\";import{jsx as _jsx}from\"react/jsx-runtime\";const ReadAloud=()=>{const{i18n}=useTranslation();const[voices,setVoices]=useState([]);const[isSpeaking,setIsSpeaking]=useState(false);const[isLoading,setIsLoading]=useState(false);const currentUtteranceRef=useRef(null);const queueRef=useRef([]);const isProcessingRef=useRef(false);const voiceWarningShownRef=useRef(false);// Language code to voice locale mapping\nconst langToLocale={en:\"en-IN\",es:\"es-ES\",// Spanish fallback\nhi:\"hi-IN\",ta:\"ta-IN\",ml:\"ml-IN\",mr:\"mr-IN\",gu:\"gu-IN\",kn:\"kn-IN\",raj:\"hi-IN\"// Rajasthani fallback to Hindi\n};// Load voices when component mounts\nuseEffect(()=>{const loadVoices=()=>{const availableVoices=window.speechSynthesis.getVoices();setVoices(availableVoices);// Log available voices for debugging\nconsole.log(\"Available voices:\",availableVoices.map(v=>({name:v.name,lang:v.lang})));};// Load voices immediately if available\nloadVoices();// Some browsers load voices asynchronously - trigger a reload\nif(window.speechSynthesis.onvoiceschanged!==undefined){window.speechSynthesis.onvoiceschanged=loadVoices;}// Force voice loading on Chrome/Edge (they load voices asynchronously)\n// Trigger onvoiceschanged event by calling getVoices multiple times\nlet attempts=0;const checkVoices=setInterval(()=>{const availableVoices=window.speechSynthesis.getVoices();if(availableVoices.length>0||attempts>10){setVoices(availableVoices);clearInterval(checkVoices);if(availableVoices.length>0){console.log(\"Voices loaded:\",availableVoices.length);}}attempts++;},100);// Cleanup: stop any ongoing speech when component unmounts\nreturn()=>{clearInterval(checkVoices);if(currentUtteranceRef.current){window.speechSynthesis.cancel();}};},[]);// Find the best matching voice for a given locale\nconst findVoice=locale=>{// Reload voices to ensure we have the latest list\nconst availableVoices=window.speechSynthesis.getVoices();if(availableVoices.length===0){console.warn(\"No voices available\");return null;}const langCode=locale.split(\"-\")[0];console.log(\"Looking for voice for locale: \".concat(locale,\", lang code: \").concat(langCode));console.log(\"Available voices:\",availableVoices.map(v=>\"\".concat(v.name,\" (\").concat(v.lang,\")\")));// First, try to find an exact match\nlet voice=availableVoices.find(v=>v.lang===locale);if(voice){console.log(\"Found exact match: \".concat(voice.name,\" (\").concat(voice.lang,\")\"));return voice;}// If no exact match, try to find a voice with the same language code (case insensitive)\n// IMPORTANT: Only match if the language code matches, not just any Indian voice\nvoice=availableVoices.find(v=>{const voiceLangCode=v.lang.split(\"-\")[0].toLowerCase();return voiceLangCode===langCode.toLowerCase();});if(voice){console.log(\"Found language match: \".concat(voice.name,\" (\").concat(voice.lang,\")\"));return voice;}// Try to find any voice with the language code anywhere in the lang string\n// But be more strict - check if lang code appears at the start or after a separator\nvoice=availableVoices.find(v=>{const voiceLang=v.lang.toLowerCase();const langCodeLower=langCode.toLowerCase();// Match if lang code is at start, or after a dash/underscore\nreturn voiceLang===langCodeLower||voiceLang.startsWith(langCodeLower+\"-\")||voiceLang.startsWith(langCodeLower+\"_\");});if(voice){console.log(\"Found partial match: \".concat(voice.name,\" (\").concat(voice.lang,\")\"));return voice;}// DO NOT fall back to other languages - return null if no matching voice found\n// This allows the browser to use its default behavior with just the lang attribute\nconsole.warn(\"No voice found matching language code: \".concat(langCode));return null;};// Extract text content from the page, excluding navigation, footer, and buttons\nconst extractPageContent=()=>{// Selectors to exclude\nconst excludeSelectors=[\"nav\",\"footer\",\"button\",\"[role='button']\",\"[role='navigation']\",\".read-aloud-button\",// Exclude the read-aloud button itself\n\"script\",\"style\",\"noscript\",\"svg\",// Exclude SVG icons\n\"[aria-hidden='true']\"// Exclude hidden elements\n];// Get the main content area (usually main, article, or the main div)\nconst mainContent=document.querySelector(\"main\")||document.querySelector(\"article\")||document.querySelector('[role=\"main\"]')||document.querySelector(\".App > div:not(nav):not(footer)\")||document.body;// Clone the element to avoid modifying the original\nconst clone=mainContent.cloneNode(true);// Remove excluded elements from clone\nexcludeSelectors.forEach(selector=>{try{const elements=clone.querySelectorAll(selector);elements.forEach(el=>el.remove());}catch(e){// Ignore selector errors\n}});// Extract text from semantic elements (headings, paragraphs, list items, etc.)\nconst textElements=[];const contentSelectors=\"h1, h2, h3, h4, h5, h6, p, li, td, th, label, span, div, blockquote, figcaption\";// Get all content elements from the original DOM (not clone) to preserve structure\nconst allElements=mainContent.querySelectorAll(contentSelectors);allElements.forEach(el=>{// Skip if element is in excluded areas\nif(el.closest(\"nav\")||el.closest(\"header\")||el.closest(\"footer\")||el.closest(\"button\")||el.closest(\".read-aloud-button\")||el.closest(\"[role='button']\")||el.closest(\"[aria-hidden='true']\")){return;}const text=el.textContent.trim();// Filter out very short texts, very long texts, and non-meaningful content\nif(text.length>=10&&text.length<=2000&&!/^[0-9\\s\\-_\\.]+$/.test(text)&&// Exclude pure numbers/symbols\n!text.match(/^(EN|ES|HI|TA|ML|MR|GU)$/i)// Exclude language codes\n){// Check if this text is not a duplicate or substring of another\nconst isDuplicate=textElements.some(existing=>existing===text||existing.includes(text)||text.includes(existing));if(!isDuplicate){textElements.push(text);}}});// If we didn't get enough content, try a more aggressive approach\nif(textElements.length<3){const walker=document.createTreeWalker(mainContent,NodeFilter.SHOW_TEXT,null,false);let node;while(node=walker.nextNode()){// Skip if in excluded areas\nlet parent=node.parentElement;let shouldSkip=false;while(parent&&parent!==mainContent){if(parent.tagName===\"NAV\"||parent.tagName===\"HEADER\"||parent.tagName===\"FOOTER\"||parent.tagName===\"BUTTON\"||parent.closest(\".read-aloud-button\")||parent.getAttribute(\"aria-hidden\")===\"true\"){shouldSkip=true;break;}parent=parent.parentElement;}if(shouldSkip)continue;const text=node.textContent.trim();if(text.length>=10&&text.length<=2000&&!/^[0-9\\s\\-_\\.]+$/.test(text)){const isDuplicate=textElements.some(existing=>existing===text||existing.includes(text)||text.includes(existing));if(!isDuplicate){textElements.push(text);}}}}// Filter and return unique texts, limit to reasonable amount\nreturn textElements.filter((text,index,self)=>self.indexOf(text)===index).slice(0,100);// Limit to first 100 text chunks\n};// Process the speech queue\nconst processQueue=()=>{var _i18n$language;if(isProcessingRef.current||queueRef.current.length===0){if(queueRef.current.length===0){setIsSpeaking(false);setIsLoading(false);}return;}// Ensure voices are loaded\nconst availableVoices=window.speechSynthesis.getVoices();if(availableVoices.length===0){console.warn(\"Voices not loaded yet, retrying...\");setTimeout(()=>processQueue(),500);return;}isProcessingRef.current=true;const text=queueRef.current.shift();const currentLang=((_i18n$language=i18n.language)===null||_i18n$language===void 0?void 0:_i18n$language.split(\"-\")[0])||\"en\";const locale=langToLocale[currentLang]||langToLocale[\"en\"];console.log(\"Speaking in language: \".concat(currentLang,\", locale: \").concat(locale));// Create utterance\nconst utterance=new SpeechSynthesisUtterance(text);utterance.lang=locale;utterance.rate=0.9;// Slightly slower for better comprehension\nutterance.pitch=1.0;utterance.volume=1.0;// Find and set the voice\nconst voice=findVoice(locale);if(voice){utterance.voice=voice;console.log(\"Using voice: \".concat(voice.name,\" (\").concat(voice.lang,\")\"));}else{console.warn(\"No voice found for \".concat(locale,\", using lang attribute only\"));// Show warning toast only once per session\nif(!voiceWarningShownRef.current){voiceWarningShownRef.current=true;toast.warning(\"Voice for \".concat(currentLang.toUpperCase(),\" not found\"),{description:\"The browser will attempt to use the best available voice. You may need to install language packs in your system settings (Windows: Settings → Time & Language → Language).\",duration:6000});}// Don't set a voice - let the browser use the lang attribute to find the best match\n// This is better than forcing an English voice\n}// Handle speech events\nutterance.onstart=()=>{console.log(\"Speech started\");};utterance.onend=()=>{console.log(\"Speech ended\");isProcessingRef.current=false;currentUtteranceRef.current=null;// Process next item in queue\nsetTimeout(()=>processQueue(),100);};utterance.onerror=error=>{var _error$utterance;console.error(\"Speech synthesis error:\",error);console.error(\"Error details:\",{error:error.error,type:error.type,charIndex:error.charIndex,utterance:(_error$utterance=error.utterance)===null||_error$utterance===void 0?void 0:_error$utterance.text});isProcessingRef.current=false;currentUtteranceRef.current=null;// Continue with next item even on error\nsetTimeout(()=>processQueue(),100);};// Store reference and speak\ncurrentUtteranceRef.current=utterance;// Cancel any ongoing speech before starting new one\nif(window.speechSynthesis.speaking){window.speechSynthesis.cancel();}window.speechSynthesis.speak(utterance);};// Handle read aloud functionality\nconst handleReadAloud=()=>{if(isSpeaking){// Stop speaking\nwindow.speechSynthesis.cancel();queueRef.current=[];isProcessingRef.current=false;setIsSpeaking(false);setIsLoading(false);currentUtteranceRef.current=null;voiceWarningShownRef.current=false;// Reset warning flag\nreturn;}// Start reading\nsetIsLoading(true);voiceWarningShownRef.current=false;// Reset warning flag for new session\nconst texts=extractPageContent();if(texts.length===0){alert(\"No readable content found on this page.\");setIsLoading(false);return;}// Build queue\nqueueRef.current=texts;setIsSpeaking(true);setIsLoading(false);// Start processing\nprocessQueue();};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-6 right-6 z-50\",\"x-file-name\":\"ReadAloud\",\"x-line-number\":\"390\",\"x-component\":\"div\",\"x-id\":\"ReadAloud_390\",\"x-dynamic\":\"false\",children:/*#__PURE__*/_jsx(\"div\",{\"x-file-name\":\"ReadAloud\",\"x-line-number\":\"391\",\"x-component\":\"Button\",\"x-id\":\"ReadAloud_391\",\"x-dynamic\":\"true\",\"data-debug-wrapper\":\"true\",style:{display:\"contents\"},children:/*#__PURE__*/_jsx(Button,{onClick:handleReadAloud,className:\"read-aloud-button bg-[#2563EB] hover:bg-[#1E3A8A] text-white rounded-full shadow-lg h-14 w-14 p-0 flex items-center justify-center transition-all hover:scale-110\",\"aria-label\":isSpeaking?\"Stop reading\":\"Read page aloud\",title:isSpeaking?\"Stop reading\":\"Read page aloud\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{\"x-file-name\":\"ReadAloud\",\"x-line-number\":\"398\",\"x-component\":\"Loader2\",\"x-id\":\"ReadAloud_398\",\"x-dynamic\":\"false\",\"data-debug-wrapper\":\"true\",style:{display:\"contents\"},children:/*#__PURE__*/_jsx(Loader2,{className:\"h-6 w-6 animate-spin\"})}):isSpeaking?/*#__PURE__*/_jsx(\"div\",{\"x-file-name\":\"ReadAloud\",\"x-line-number\":\"400\",\"x-component\":\"VolumeX\",\"x-id\":\"ReadAloud_400\",\"x-dynamic\":\"false\",\"data-debug-wrapper\":\"true\",style:{display:\"contents\"},children:/*#__PURE__*/_jsx(VolumeX,{className:\"h-6 w-6\"})}):/*#__PURE__*/_jsx(\"div\",{\"x-file-name\":\"ReadAloud\",\"x-line-number\":\"402\",\"x-component\":\"Volume2\",\"x-id\":\"ReadAloud_402\",\"x-dynamic\":\"false\",\"data-debug-wrapper\":\"true\",style:{display:\"contents\"},children:/*#__PURE__*/_jsx(Volume2,{className:\"h-6 w-6\"})})})})});};export default ReadAloud;","map":{"version":3,"names":["useState","useEffect","useRef","useTranslation","Volume2","VolumeX","Loader2","Button","toast","jsx","_jsx","ReadAloud","i18n","voices","setVoices","isSpeaking","setIsSpeaking","isLoading","setIsLoading","currentUtteranceRef","queueRef","isProcessingRef","voiceWarningShownRef","langToLocale","en","es","hi","ta","ml","mr","gu","kn","raj","loadVoices","availableVoices","window","speechSynthesis","getVoices","console","log","map","v","name","lang","onvoiceschanged","undefined","attempts","checkVoices","setInterval","length","clearInterval","current","cancel","findVoice","locale","warn","langCode","split","concat","voice","find","voiceLangCode","toLowerCase","voiceLang","langCodeLower","startsWith","extractPageContent","excludeSelectors","mainContent","document","querySelector","body","clone","cloneNode","forEach","selector","elements","querySelectorAll","el","remove","e","textElements","contentSelectors","allElements","closest","text","textContent","trim","test","match","isDuplicate","some","existing","includes","push","walker","createTreeWalker","NodeFilter","SHOW_TEXT","node","nextNode","parent","parentElement","shouldSkip","tagName","getAttribute","filter","index","self","indexOf","slice","processQueue","_i18n$language","setTimeout","shift","currentLang","language","utterance","SpeechSynthesisUtterance","rate","pitch","volume","warning","toUpperCase","description","duration","onstart","onend","onerror","error","_error$utterance","type","charIndex","speaking","speak","handleReadAloud","texts","alert","className","children","style","display","onClick","title"],"sources":["C:/Users/ADMIN/Desktop/Pharma/Frontend/src/components/ReadAloud.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Volume2, VolumeX, Loader2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst ReadAloud = () => {\r\n  const { i18n } = useTranslation();\r\n  const [voices, setVoices] = useState([]);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const currentUtteranceRef = useRef(null);\r\n  const queueRef = useRef([]);\r\n  const isProcessingRef = useRef(false);\r\n  const voiceWarningShownRef = useRef(false);\r\n\r\n  // Language code to voice locale mapping\r\n  const langToLocale = {\r\n    en: \"en-IN\",\r\n    es: \"es-ES\", // Spanish fallback\r\n    hi: \"hi-IN\",\r\n    ta: \"ta-IN\",\r\n    ml: \"ml-IN\",\r\n    mr: \"mr-IN\",\r\n    gu: \"gu-IN\",\r\n    kn: \"kn-IN\",\r\n    raj: \"hi-IN\", // Rajasthani fallback to Hindi\r\n  };\r\n\r\n  // Load voices when component mounts\r\n  useEffect(() => {\r\n    const loadVoices = () => {\r\n      const availableVoices = window.speechSynthesis.getVoices();\r\n      setVoices(availableVoices);\r\n      // Log available voices for debugging\r\n      console.log(\"Available voices:\", availableVoices.map(v => ({ name: v.name, lang: v.lang })));\r\n    };\r\n\r\n    // Load voices immediately if available\r\n    loadVoices();\r\n\r\n    // Some browsers load voices asynchronously - trigger a reload\r\n    if (window.speechSynthesis.onvoiceschanged !== undefined) {\r\n      window.speechSynthesis.onvoiceschanged = loadVoices;\r\n    }\r\n\r\n    // Force voice loading on Chrome/Edge (they load voices asynchronously)\r\n    // Trigger onvoiceschanged event by calling getVoices multiple times\r\n    let attempts = 0;\r\n    const checkVoices = setInterval(() => {\r\n      const availableVoices = window.speechSynthesis.getVoices();\r\n      if (availableVoices.length > 0 || attempts > 10) {\r\n        setVoices(availableVoices);\r\n        clearInterval(checkVoices);\r\n        if (availableVoices.length > 0) {\r\n          console.log(\"Voices loaded:\", availableVoices.length);\r\n        }\r\n      }\r\n      attempts++;\r\n    }, 100);\r\n\r\n    // Cleanup: stop any ongoing speech when component unmounts\r\n    return () => {\r\n      clearInterval(checkVoices);\r\n      if (currentUtteranceRef.current) {\r\n        window.speechSynthesis.cancel();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Find the best matching voice for a given locale\r\n  const findVoice = (locale) => {\r\n    // Reload voices to ensure we have the latest list\r\n    const availableVoices = window.speechSynthesis.getVoices();\r\n    if (availableVoices.length === 0) {\r\n      console.warn(\"No voices available\");\r\n      return null;\r\n    }\r\n\r\n    const langCode = locale.split(\"-\")[0];\r\n    console.log(`Looking for voice for locale: ${locale}, lang code: ${langCode}`);\r\n    console.log(`Available voices:`, availableVoices.map(v => `${v.name} (${v.lang})`));\r\n\r\n    // First, try to find an exact match\r\n    let voice = availableVoices.find((v) => v.lang === locale);\r\n    if (voice) {\r\n      console.log(`Found exact match: ${voice.name} (${voice.lang})`);\r\n      return voice;\r\n    }\r\n\r\n    // If no exact match, try to find a voice with the same language code (case insensitive)\r\n    // IMPORTANT: Only match if the language code matches, not just any Indian voice\r\n    voice = availableVoices.find((v) => {\r\n      const voiceLangCode = v.lang.split(\"-\")[0].toLowerCase();\r\n      return voiceLangCode === langCode.toLowerCase();\r\n    });\r\n    if (voice) {\r\n      console.log(`Found language match: ${voice.name} (${voice.lang})`);\r\n      return voice;\r\n    }\r\n\r\n    // Try to find any voice with the language code anywhere in the lang string\r\n    // But be more strict - check if lang code appears at the start or after a separator\r\n    voice = availableVoices.find((v) => {\r\n      const voiceLang = v.lang.toLowerCase();\r\n      const langCodeLower = langCode.toLowerCase();\r\n      // Match if lang code is at start, or after a dash/underscore\r\n      return voiceLang === langCodeLower || \r\n             voiceLang.startsWith(langCodeLower + \"-\") ||\r\n             voiceLang.startsWith(langCodeLower + \"_\");\r\n    });\r\n    if (voice) {\r\n      console.log(`Found partial match: ${voice.name} (${voice.lang})`);\r\n      return voice;\r\n    }\r\n\r\n    // DO NOT fall back to other languages - return null if no matching voice found\r\n    // This allows the browser to use its default behavior with just the lang attribute\r\n    console.warn(`No voice found matching language code: ${langCode}`);\r\n    return null;\r\n  };\r\n\r\n  // Extract text content from the page, excluding navigation, footer, and buttons\r\n  const extractPageContent = () => {\r\n    // Selectors to exclude\r\n    const excludeSelectors = [\r\n      \"nav\",\r\n      \r\n      \"footer\",\r\n      \"button\",\r\n      \"[role='button']\",\r\n      \"[role='navigation']\",\r\n      \".read-aloud-button\", // Exclude the read-aloud button itself\r\n      \"script\",\r\n      \"style\",\r\n      \"noscript\",\r\n      \"svg\", // Exclude SVG icons\r\n      \"[aria-hidden='true']\", // Exclude hidden elements\r\n    ];\r\n\r\n    // Get the main content area (usually main, article, or the main div)\r\n    const mainContent =\r\n      document.querySelector(\"main\") ||\r\n      document.querySelector(\"article\") ||\r\n      document.querySelector('[role=\"main\"]') ||\r\n      document.querySelector(\".App > div:not(nav):not(footer)\") ||\r\n      document.body;\r\n\r\n    // Clone the element to avoid modifying the original\r\n    const clone = mainContent.cloneNode(true);\r\n\r\n    // Remove excluded elements from clone\r\n    excludeSelectors.forEach((selector) => {\r\n      try {\r\n        const elements = clone.querySelectorAll(selector);\r\n        elements.forEach((el) => el.remove());\r\n      } catch (e) {\r\n        // Ignore selector errors\r\n      }\r\n    });\r\n\r\n    // Extract text from semantic elements (headings, paragraphs, list items, etc.)\r\n    const textElements = [];\r\n    const contentSelectors = \"h1, h2, h3, h4, h5, h6, p, li, td, th, label, span, div, blockquote, figcaption\";\r\n    \r\n    // Get all content elements from the original DOM (not clone) to preserve structure\r\n    const allElements = mainContent.querySelectorAll(contentSelectors);\r\n    \r\n    allElements.forEach((el) => {\r\n      // Skip if element is in excluded areas\r\n      if (\r\n        el.closest(\"nav\") ||\r\n        el.closest(\"header\") ||\r\n        el.closest(\"footer\") ||\r\n        el.closest(\"button\") ||\r\n        el.closest(\".read-aloud-button\") ||\r\n        el.closest(\"[role='button']\") ||\r\n        el.closest(\"[aria-hidden='true']\")\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      const text = el.textContent.trim();\r\n      \r\n      // Filter out very short texts, very long texts, and non-meaningful content\r\n      if (\r\n        text.length >= 10 &&\r\n        text.length <= 2000 &&\r\n        !/^[0-9\\s\\-_\\.]+$/.test(text) && // Exclude pure numbers/symbols\r\n        !text.match(/^(EN|ES|HI|TA|ML|MR|GU)$/i) // Exclude language codes\r\n      ) {\r\n        // Check if this text is not a duplicate or substring of another\r\n        const isDuplicate = textElements.some(\r\n          (existing) =>\r\n            existing === text ||\r\n            existing.includes(text) ||\r\n            text.includes(existing)\r\n        );\r\n\r\n        if (!isDuplicate) {\r\n          textElements.push(text);\r\n        }\r\n      }\r\n    });\r\n\r\n    // If we didn't get enough content, try a more aggressive approach\r\n    if (textElements.length < 3) {\r\n      const walker = document.createTreeWalker(\r\n        mainContent,\r\n        NodeFilter.SHOW_TEXT,\r\n        null,\r\n        false\r\n      );\r\n\r\n      let node;\r\n      while ((node = walker.nextNode())) {\r\n        // Skip if in excluded areas\r\n        let parent = node.parentElement;\r\n        let shouldSkip = false;\r\n        while (parent && parent !== mainContent) {\r\n          if (\r\n            parent.tagName === \"NAV\" ||\r\n            parent.tagName === \"HEADER\" ||\r\n            parent.tagName === \"FOOTER\" ||\r\n            parent.tagName === \"BUTTON\" ||\r\n            parent.closest(\".read-aloud-button\") ||\r\n            parent.getAttribute(\"aria-hidden\") === \"true\"\r\n          ) {\r\n            shouldSkip = true;\r\n            break;\r\n          }\r\n          parent = parent.parentElement;\r\n        }\r\n\r\n        if (shouldSkip) continue;\r\n\r\n        const text = node.textContent.trim();\r\n        if (\r\n          text.length >= 10 &&\r\n          text.length <= 2000 &&\r\n          !/^[0-9\\s\\-_\\.]+$/.test(text)\r\n        ) {\r\n          const isDuplicate = textElements.some(\r\n            (existing) =>\r\n              existing === text ||\r\n              existing.includes(text) ||\r\n              text.includes(existing)\r\n          );\r\n\r\n          if (!isDuplicate) {\r\n            textElements.push(text);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Filter and return unique texts, limit to reasonable amount\r\n    return textElements\r\n      .filter((text, index, self) => self.indexOf(text) === index)\r\n      .slice(0, 100); // Limit to first 100 text chunks\r\n  };\r\n\r\n  // Process the speech queue\r\n  const processQueue = () => {\r\n    if (isProcessingRef.current || queueRef.current.length === 0) {\r\n      if (queueRef.current.length === 0) {\r\n        setIsSpeaking(false);\r\n        setIsLoading(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Ensure voices are loaded\r\n    const availableVoices = window.speechSynthesis.getVoices();\r\n    if (availableVoices.length === 0) {\r\n      console.warn(\"Voices not loaded yet, retrying...\");\r\n      setTimeout(() => processQueue(), 500);\r\n      return;\r\n    }\r\n\r\n    isProcessingRef.current = true;\r\n    const text = queueRef.current.shift();\r\n    const currentLang = i18n.language?.split(\"-\")[0] || \"en\";\r\n    const locale = langToLocale[currentLang] || langToLocale[\"en\"];\r\n\r\n    console.log(`Speaking in language: ${currentLang}, locale: ${locale}`);\r\n\r\n    // Create utterance\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = locale;\r\n    utterance.rate = 0.9; // Slightly slower for better comprehension\r\n    utterance.pitch = 1.0;\r\n    utterance.volume = 1.0;\r\n\r\n    // Find and set the voice\r\n    const voice = findVoice(locale);\r\n    if (voice) {\r\n      utterance.voice = voice;\r\n      console.log(`Using voice: ${voice.name} (${voice.lang})`);\r\n    } else {\r\n      console.warn(`No voice found for ${locale}, using lang attribute only`);\r\n      // Show warning toast only once per session\r\n      if (!voiceWarningShownRef.current) {\r\n        voiceWarningShownRef.current = true;\r\n        toast.warning(\r\n          `Voice for ${currentLang.toUpperCase()} not found`,\r\n          {\r\n            description: \"The browser will attempt to use the best available voice. You may need to install language packs in your system settings (Windows: Settings → Time & Language → Language).\",\r\n            duration: 6000,\r\n          }\r\n        );\r\n      }\r\n      // Don't set a voice - let the browser use the lang attribute to find the best match\r\n      // This is better than forcing an English voice\r\n    }\r\n\r\n    // Handle speech events\r\n    utterance.onstart = () => {\r\n      console.log(\"Speech started\");\r\n    };\r\n\r\n    utterance.onend = () => {\r\n      console.log(\"Speech ended\");\r\n      isProcessingRef.current = false;\r\n      currentUtteranceRef.current = null;\r\n      // Process next item in queue\r\n      setTimeout(() => processQueue(), 100);\r\n    };\r\n\r\n    utterance.onerror = (error) => {\r\n      console.error(\"Speech synthesis error:\", error);\r\n      console.error(\"Error details:\", {\r\n        error: error.error,\r\n        type: error.type,\r\n        charIndex: error.charIndex,\r\n        utterance: error.utterance?.text\r\n      });\r\n      isProcessingRef.current = false;\r\n      currentUtteranceRef.current = null;\r\n      // Continue with next item even on error\r\n      setTimeout(() => processQueue(), 100);\r\n    };\r\n\r\n    // Store reference and speak\r\n    currentUtteranceRef.current = utterance;\r\n    \r\n    // Cancel any ongoing speech before starting new one\r\n    if (window.speechSynthesis.speaking) {\r\n      window.speechSynthesis.cancel();\r\n    }\r\n    \r\n    window.speechSynthesis.speak(utterance);\r\n  };\r\n\r\n  // Handle read aloud functionality\r\n  const handleReadAloud = () => {\r\n    if (isSpeaking) {\r\n      // Stop speaking\r\n      window.speechSynthesis.cancel();\r\n      queueRef.current = [];\r\n      isProcessingRef.current = false;\r\n      setIsSpeaking(false);\r\n      setIsLoading(false);\r\n      currentUtteranceRef.current = null;\r\n      voiceWarningShownRef.current = false; // Reset warning flag\r\n      return;\r\n    }\r\n\r\n    // Start reading\r\n    setIsLoading(true);\r\n    voiceWarningShownRef.current = false; // Reset warning flag for new session\r\n    const texts = extractPageContent();\r\n\r\n    if (texts.length === 0) {\r\n      alert(\"No readable content found on this page.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Build queue\r\n    queueRef.current = texts;\r\n    setIsSpeaking(true);\r\n    setIsLoading(false);\r\n\r\n    // Start processing\r\n    processQueue();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed bottom-6 right-6 z-50\">\r\n      <Button\r\n        onClick={handleReadAloud}\r\n        className=\"read-aloud-button bg-[#2563EB] hover:bg-[#1E3A8A] text-white rounded-full shadow-lg h-14 w-14 p-0 flex items-center justify-center transition-all hover:scale-110\"\r\n        aria-label={isSpeaking ? \"Stop reading\" : \"Read page aloud\"}\r\n        title={isSpeaking ? \"Stop reading\" : \"Read page aloud\"}\r\n      >\r\n        {isLoading ? (\r\n          <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n        ) : isSpeaking ? (\r\n          <VolumeX className=\"h-6 w-6\" />\r\n        ) : (\r\n          <Volume2 className=\"h-6 w-6\" />\r\n        )}\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReadAloud;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}